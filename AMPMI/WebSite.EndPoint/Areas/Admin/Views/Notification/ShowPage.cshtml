@model List<WebSite.EndPoint.Areas.Admin.Models.Notification.NotificationReadByAdminVM>

@{
    Layout = "~/Areas/Admin/Views/Shared/_layout.cshtml";
    ViewData["SelectedAdmin"] = "Notif";
}

<div class="container-fluid">
    <div class="pageName">
        <span class="textPage">لیست اعلان‌ها</span>
    </div>
    <div>
        @if (ViewData["Message"] is not null)
        {
            <p style="color : red">@ViewData["Message"]?.ToString()</p>
        }
    </div>
    <div class="row">
        <div class="col-md-12">
            <a style="text-align:center; width:160px; margin:10px;" href="#" id="new" class="text-black btn-submit btn-block">
                <span style="color:white;">افزودن اعلان جدید</span>
            </a>
            @* <a id="new" href="#"> <img class="img-Icon" src="~/images/addition copy.png" /></a> *@
            @* <a hidden id="save" href="#"> <img class="img-Icon" src="~/images/diskette copy.png" /></a>
            <a hidden id="cancle" href="#"><img class="img-Icon" src="~/images/cancel.png" /></a> *@
            <!-- Form to create a new notification -->
            <form id="newForm" asp-area="Admin" asp-controller="Notification" asp-action="Create" method="post" hidden>
                <div class="form-group">
                    <label for="Subject" class="input-Label">موضوع اعلان:</label>

                    <input type="text" id="Subject" name="subject" class="input-text" placeholder="موضوع اعلان را وارد کنید" />
                </div>
                <div class="form-group">
                    <label for="Description" class="input-Label">متن اعلان:</label>
                    <textarea id="Description" name="description" class="input-text" rows="5" placeholder="متن متن را وارد کنید"></textarea>

                </div>
                <div>
                    <div class="row mt-2">
                        <div class="col-md-5 my-2" style="display: ruby;">
                            <a style="text-align:center; width:100px" href="#" id="save" class="text-black btn-submit btn-block">
                                <span style="color:white;">ذخیره</span>
                            </a>
                            <a style="text-align:center; width:100px" href="#" id="cancle" class="text-black btn-submit btn-block">
                                <span style="color:white;">انصراف</span>
                            </a>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div>
            <table id="notiftable" class="display tbStyle">
                <thead>
                    <tr>
                        <th>ردیف</th>
                        <th>موضوع اعلان</th>
                        <th>متن اعلان</th>
                        <th>تاریخ</th>
                        <th>حذف</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        long rowIndex = 1;
                    }
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td class="td-Icon">@rowIndex</td>
                            <td>@item.Subject</td>
                            <td>@item.Description</td>
                            <td>@(item.CreateAt.Year + "/" + item.CreateAt.Month + "/" + item.CreateAt.Day)</td>
                            <td class="td-Icon">
                                <a onclick="return DeleteRow(event)" href="@Url.Action("Delete" ,"Notification" , new {area = "Admin" , id = @item.Id})" id="cancle">
                                    <img class="img-Icon" src="~/images/recycle.png" />
                                </a>
                            </td>
                        </tr>
                        rowIndex++;
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@section Scripts
{
    <script>
        document.querySelector('#notiftable')
            .setAttribute('dir', 'rtl');



        $('#notiftable').DataTable({
                language: {
                    "emptyTable": "هیچ داده‌ای در جدول وجود ندارد",
                    "info": "نمایش _START_ تا _END_ از _TOTAL_ رکورد",
                    "infoEmpty": "نمایش 0 تا 0 از 0 رکورد",
                    "infoFiltered": "(فیلتر شده از _MAX_ رکورد)",
                    "lengthMenu": "نمایش _MENU_ رکورد در هر صفحه",
                    "loadingRecords": "در حال بارگذاری...",
                    "processing": "در حال پردازش...",
                    "search": "جستجو:",
                    "zeroRecords": "رکوردی با این مشخصات پیدا نشد",
                    "paginate": {
                        "first": "اولین",
                        "last": "آخرین",
                        "next": "بعدی",
                        "previous": "قبلی"
                    },
                    "aria": {
                        "sortAscending": ": فعال‌سازی مرتب‌سازی صعودی",
                        "sortDescending": ": فعال‌سازی مرتب‌سازی نزولی"
                    }
                }
            });

        $("#new").click(function(){
            $("#newForm").show();
            $("#save").show();
            $("#cancle").show();
        });

        function DeleteRow(event){
            var isConfirmd= confirm("آیا از حذف این ردیف اطمینان دارید ؟")
            if(!isConfirmd){
                event.preventDefault();
                return false;
            }
            else{
                return true;
            }

        }

        function HideForm()
        {
            $("#newForm").hide();
        }

        $("#save").click(function(){
            HideForm();
        });

        $("#cancle").click(function(){
            HideForm();
            $("#save").hide();
            $("#cancle").hide();
        });
         $("#save").click(function (event) {
            event.preventDefault();
            $("#newForm").submit();
        });


        $("#cancle").click(function (event) {
            event.preventDefault();
            $("#newForm").hide();
        });
    </script>


}