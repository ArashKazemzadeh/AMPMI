@model List<WebSite.EndPoint.Areas.Admin.Models.Product.ListProductVM>
@{
    Layout = "~/Areas/Admin/Views/Shared/_layout.cshtml";
    ViewData["SelectedAdmin"] = (ViewData["CompanyId"] is not null && (long)ViewData["CompanyId"] > 0) ? "User" : "Product";
}
<div class="container-fluid">
    <div class="pageName">
        @if (ViewData["CompanyId"] is not null && (long)ViewData["CompanyId"] > 0)
        {
            <span class="textPage">
                <a asp-area="Admin" asp-controller=User asp-action=UserList>
                    لیست کاربران
                </a>
                > @(ViewData["CompanyName"] is not null ? ViewData["CompanyName"] : "") > ليست محصولات
            </span>
        }
        else
        {
            <span class="textPage">لیست محصولات</span>
        }
    </div>
    @if (TempData["error"] is not null)
    {
        <div class="row">
            <p style="color:red;">@TempData["error"].ToString()</p>
        </div>
    }
    <div class="row">
        <a style="text-align:center; width:160px; margin:10px;" href="@Url.Action("NewProduct","Product",new{ companyId = (long)ViewData["CompanyId"]})" id="new" class="text-black btn-submit btn-block">
            <span style="color:white;">افزودن محصول جدید</span>
        </a>
        @* <a href="@Url.Action("NewProduct","Product",new{ companyId = (long)ViewData["CompanyId"]})" id="new"> <img class="img-Icon" src="~/images/addition copy.png" /> </a> *@
    </div>
    <div class="row">
        <table id="myTable" class="display tbStyle">
            <thead>
                <tr>
                    <th>ردیف</th>
                    <th>نام</th>
                    <th>نام قطعه ساز</th>
                    <th>گروه اصلی</th>
                    <th>گروه فرعی</th>
                    <th>وضعییت تایید</th>
                    <th>ویرایش</th>
                    <th>حذف</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="td-Icon">@item.RowNum</td>
                        <td>@item.Name</td>
                        <td>@item.CompanyName</td>
                        <td>@item.CategoryName</td>
                        <td>@item.SubCategoryName</td>
                        <td class="td-Icon"><input disabled @(item.IsConfirmed ? "checked" : "") type="checkbox"></td>
                        <td class="td-Icon"><a href="@Url.Action("EditProduct","Product",new{area="Admin",id=item.Id,companyId = (long)ViewData["CompanyId"]})"><img class="img-Icon" src="~/images/editing.png" /></a></td>
                        <td class="td-Icon"><a onclick="return DeleteRow(event)" href="@Url.Action("DeleteProduct","Product",new{area="Admin",id=item.Id,companyId = (long)ViewData["CompanyId"]})"><img class="img-Icon" src="~/images\recycle.png" /></a></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
@section Scripts
{
    <script>

          document.querySelector('#myTable')
            .setAttribute('dir', 'rtl'); // Demo only

            $('#myTable').DataTable({
                language: {
                    "emptyTable": "هیچ داده‌ای در جدول وجود ندارد",
                    "info": "نمایش _START_ تا _END_ از _TOTAL_ رکورد",
                    "infoEmpty": "نمایش 0 تا 0 از 0 رکورد",
                    "infoFiltered": "(فیلتر شده از _MAX_ رکورد)",
                    "lengthMenu": "نمایش _MENU_ رکورد در هر صفحه",
                    "loadingRecords": "در حال بارگذاری...",
                    "processing": "در حال پردازش...",
                    "search": "جستجو:",
                    "zeroRecords": "رکوردی با این مشخصات پیدا نشد",
                    "paginate": {
                        "first": "اولین",
                        "last": "آخرین",
                        "next": "بعدی",
                        "previous": "قبلی"
                    },
                    "aria": {
                        "sortAscending": ": فعال‌سازی مرتب‌سازی صعودی",
                        "sortDescending": ": فعال‌سازی مرتب‌سازی نزولی"
                    }
                }
            });


        function DeleteRow(event){
            var isConfirmd= confirm("آیا از حذف این ردیف اطمینان دارید ؟")
            if(!isConfirmd){
                event.preventDefault();
                return false;
            }
            else{
                return true;
            }

        }

    </script>
}

